# Bootsrap definitions file
# Author: Michael Cabrera



def checkWireless(ssid):

	"""
	Check for access point in range
	Return 0 if success
	Return 1 if not in range
	Return 2 if other error
	"""
	print >>sys.stdout, "Scanning for " + ssid + "..."


	retcode = subprocess.call("iwlist wlan0 scan | grep -i " + ssid, shell=True)
	if retcode != 0:
		print >>sys.stdout, ssid + " not in range."
		return 1
	elif retcode == 0:
		print >>sys.stdout, ssid + " in range."
		return 0

	return 2


def associateWireless(ssid):

	print >>sys.stdout, "Attempting association with " + ssid

	retcode = subprocess.call("wpa_supplicant -d wext -B -c /etc/node314/wpa_supplicant/" + ssid, shell=True)
	if retcode !=0:
		print >>sys.stdout, "Failed to associate with " + ssid + "."
		return 1
	elif retcode == 0:
		print >>sys.stdout, "Associated with " + ssid + "."

